<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="/src/styles.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Downloader</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script type="module" src="/src/main.ts" defer></script>
</head>

<body>
  <div class="app-container">
    <!-- Header -->
    <header class="header">
      <div class="logo-container">
        <img src="/src/assets/logo.png" class="logo-icon" alt="Logo"
          style="width: 40px; height: 40px; object-fit: contain;">
        <h1 id="app-title">Downloader</h1>
      </div>
    </header>

    <!-- Network Status Bar - Premium Design -->
    <div id="network-status" class="network-status">
      <div class="status-pills">
        <div class="status-pill pill-mode" id="pill-connection" title="Connection mode">
          <div class="pill-indicator" id="indicator-connection"></div>
          <span class="pill-label" id="status-mode">direct</span>
        </div>
        <div class="status-pill pill-wide" id="pill-proxy" title="Proxy address">
          <svg class="pill-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/><path d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
          </svg>
          <span class="pill-value" id="status-proxy">detecting...</span>
        </div>
        <div class="status-pill" id="pill-ip" title="External IP address">
          <svg class="pill-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/>
          </svg>
          <span class="pill-value" id="status-ip">...</span>
        </div>
      </div>
      <div class="status-badges">
        <div class="status-badge" id="badge-proxy" title="Proxy connection health">
          <span class="badge-dot" id="status-proxy-check"></span>
          <span class="badge-label">Status</span>
        </div>
        <div class="status-badge" id="badge-ytdlp" title="yt-dlp version">
          <span class="badge-dot" id="dot-ytdlp"></span>
          <span class="badge-label">yt-dlp</span>
          <span class="badge-value" id="status-ytdlp">...</span>
        </div>
        <button id="refresh-network" class="status-refresh" title="Refresh">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M23 4v6h-6M1 20v-6h6"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- Main Content -->
    <main class="main-content">
      <!-- URL Input Section -->
      <div class="input-section">
        <div class="input-container">
          <input type="text" id="url-input" class="url-input" placeholder="Paste YouTube video link..." />
          <button id="fetch-info-btn" class="fetch-btn">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round" />
            </svg>
            Get Info
          </button>
        </div>
      </div>

      <!-- Video Info Display -->
      <div id="video-info" class="video-info hidden">
        <div class="video-thumbnail-container">
          <img id="video-thumbnail" class="video-thumbnail" alt="Video thumbnail" />
        </div>
        <div class="video-details">
          <h2 id="video-title" class="video-title"></h2>
          <div class="video-meta">
            <span id="video-uploader" class="video-uploader"></span>
            <span class="separator">‚Ä¢</span>
            <span id="video-duration" class="video-duration"></span>
          </div>
        </div>
      </div>

      <!-- Content Restriction Banner -->
      <div id="restriction-banner" class="restriction-banner hidden">
        <div class="restriction-header">
          <span class="restriction-icon">üîí</span>
          <span class="restriction-message">Content is restricted</span>
        </div>
        <div class="restriction-suggestions"></div>
      </div>

      <!-- Download Options -->
      <div id="download-options" class="download-options hidden">
        <div class="options-grid">
          <div class="option-group">
            <label class="option-label">Tool <span class="tooltip-trigger" data-tooltip="yt-dlp: actively maintained&#10;Legacy tools (lux/you-get) removed">?</span></label>
            <select id="tool-select" class="quality-select">
              <option value="yt-dlp">yt-dlp</option>
            </select>
          </div>

          <div class="option-group">
            <label class="option-label">Quality <span class="tooltip-trigger" data-tooltip="Best: Max quality&#10;1080p/720p/480p: Resolution&#10;MP3: Audio only">?</span></label>
            <select id="quality-select" class="quality-select">
              <option value="best">üèÜ Best</option>
              <option value="1080p">üì∫ 1080p</option>
              <option value="720p" selected>üì∫ 720p</option>
              <option value="480p">üì∫ 480p</option>
              <option value="audio">üéµ MP3</option>
            </select>
          </div>

          <div class="option-group">
            <label class="option-label">Codec <span class="tooltip-trigger" data-tooltip="H.264: Compatible with QuickTime/macOS&#10;VP9/AV1: Better quality, needs VLC">?</span></label>
            <select id="codec-select" class="quality-select">
              <option value="h264" selected>üçé H.264 (QuickTime)</option>
              <option value="any">üé¨ VP9/AV1 (Best quality)</option>
            </select>
          </div>

        </div>

        <div class="option-group">
          <label class="option-label">Save Folder</label>
          <div class="path-selector">
            <input type="text" id="output-path" class="path-input" placeholder="Select folder..." readonly />
            <button id="select-path-btn" class="select-path-btn">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"
                  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
              Select Folder
            </button>
          </div>
        </div>
      </div>

      <!-- Download Button -->
      <div id="download-section" class="download-section hidden">
        <button id="download-btn" class="download-btn">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4m4-5l5 5 5-5m-5 5V3" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round" />
          </svg>
          Download Video
        </button>
      </div>

      <!-- Progress Display -->
      <div id="progress-section" class="progress-section hidden">
        <div class="progress-info">
          <span id="progress-status" class="progress-status">Preparing...</span>
          <span id="progress-percent" class="progress-percent">0%</span>
        </div>
        <div class="progress-bar-container">
          <div id="progress-bar" class="progress-bar"></div>
        </div>
      </div>

      <!-- Tools -->
      <div id="tools-section" class="tools-section">
        <div id="tools-header" class="tools-header">
          <span class="tools-title">üß∞ Tools</span>
          <button id="toggle-tools" class="tools-toggle collapsed">‚ñº</button>
        </div>
        <div id="tools-content" class="tools-content collapsed">
          <div class="tools-subtitle">
            Install/Update helper (macOS via Homebrew + pipx). If a tool is missing, click <b>Install</b>.
          </div>
          <div class="tools-network">
            <div class="tools-network-row">
              <label class="tools-network-label" for="proxy-input">Proxy (optional)</label>
              <input id="proxy-input" class="tools-network-input"
                placeholder="e.g. socks5h://127.0.0.1:1080 or http://127.0.0.1:7890"
                title="Optional. If your VPN is browser-only, set a local proxy here. Example: socks5h://127.0.0.1:1080" />
              <div class="tools-actions-stack">
                <button id="proxy-save" class="tools-network-btn" type="button" title="Save proxy value">Save</button>
                <button id="proxy-clear" class="tools-network-btn secondary" type="button"
                  title="Clear proxy value">Clear</button>
              </div>
            </div>
            <div class="tools-network-row cookies-row">
              <label class="tools-network-label" for="cookies-mode">Cookies</label>
              <div class="cookies-controls">
                <select id="cookies-mode" class="cookies-select"
                  title="Use browser cookies (recommended) or provide a cookies.txt file">
                  <option value="chrome">Chrome (logged-in)</option>
                  <option value="file">cookies.txt file</option>
                  <option value="none">None</option>
                </select>
                <input id="cookies-file" class="tools-network-input cookies-file" placeholder="Select cookies.txt‚Ä¶"
                  readonly title="Used only when Cookies mode is set to cookies.txt file" />
              </div>
              <div class="tools-actions-stack">
                <button id="cookies-pick" class="tools-network-btn" type="button"
                  title="Pick a cookies.txt file (exported from your browser)">Pick</button>
                <button id="cookies-clear" class="tools-network-btn secondary" type="button"
                  title="Reset cookies settings (back to Chrome logged-in)">Clear</button>
              </div>
            </div>
            <div class="tools-network-hint">
              Browser VPN extensions won't work. Use system VPN or local proxy (XRAY/Clash/V2Ray).
            </div>
          </div>
          <div id="tools-list" class="tools-list"></div>
        </div>
      </div>

      <!-- Terminal Log -->
      <div id="terminal-section" class="terminal-section">
        <div class="terminal-header">
          <span class="terminal-title">üìü Execution log</span>
          <button id="toggle-terminal" class="terminal-toggle collapsed">‚ñº</button>
        </div>
        <div id="terminal-content" class="terminal-content collapsed">
          <div id="terminal-log" class="terminal-log"></div>
        </div>
      </div>


      <!-- Status Message -->
      <div id="status-message" class="status-message hidden"></div>

      <!-- Footer -->
      <div class="footer">
        <div class="footer-item">
          <span class="footer-label">Developer:</span>
          <span class="footer-value">Kurein M.N.</span>
        </div>
        <div class="footer-item">
          <span class="footer-label">Version:</span>
          <span class="footer-value" id="footer-version">1.2.0</span>
        </div>
        <div class="footer-item footer-features" data-tooltip="‚Ä¢ Dual mode: Python + CLI&#10;‚Ä¢ Smart blocking diagnostics&#10;‚Ä¢ Auto-detect: 403, SABR, PO Token&#10;‚Ä¢ yt-dlp retry strategies (android/web/audio)">
          <span class="footer-badge">üõ°Ô∏è</span>
        </div>
      </div>
    </main>
  </div>
</body>

</html>